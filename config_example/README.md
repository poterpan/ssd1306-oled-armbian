# OLED 配置文件說明

## 📁 配置文件概覽

本資料夾包含多種配置範例，適用於不同的顯示需求：

| 配置文件 | 模式 | 頁面數 | 特點 | 適用場景 |
|---------|------|--------|------|---------|
| `config_mix_modern.json` | 混合模式 | 3頁 | 緊湊佈局，多資訊 | 日常監控 |
| `config_big_modern.json` | 大字模式 | 14頁 | 大字體，易讀 | 遠距離觀看 |
| `config_simple_modern.json` | 簡化模式 | 2頁 | 極簡設計 | 基本監控 |

## 🔧 配置文件結構

### 全域設定 (seting)
```json
{
  "seting": {
    "pixel": 12864,        // OLED 解析度 (128x64)
    "dev": "/dev/i2c-0",   // I2C 設備路徑
    "addr": 60             // OLED I2C 地址 (0x3C)
  }
}
```

### 頁面設定 (page_name)
```json
{
  "page_name": {
    "seting": {
      "cycle": 5,          // 循環次數
      "time": 40,          // 顯示時間 (1/10秒)
      "page": 1            // 頁面編號
    },
    "display": [           // 顯示元素陣列
      // 顯示元素...
    ]
  }
}
```

## 🎨 顯示元素類型

### 1. 文字 (str)
```json
{"type":"str", "data":"Hello", "x0":10, "y0":20, "size":2, "color":1, "en":1}
```
- `data`: 顯示文字
- `x0`, `y0`: 座標位置
- `size`: 字體大小 (1-4)
- `color`: 顏色 (1=白, 0=黑, 2=反色)
- `en`: 啟用狀態 (1=啟用, 0=停用)

### 2. 系統資訊 (base)
```json
{"type":"base", "func":2, "x0":30, "y0":16, "base":4, "class":0, "size":1, "color":1, "en":1}
```
- `func`: 功能編號 (見功能對應表)
- `base`: 顯示字元數限制
- `class`: 資料處理類型
  - `0`: 原始數值
  - `1`: 浮點數處理
  - `"%Y-%m-%d"`: 日期格式
- `port`: 網路介面名稱 (僅 func=5 使用)

### 3. 圖形元素

#### 矩形 (rect/r_rect)
```json
{"type":"r_rect", "x0":2, "y0":2, "w":124, "h":60, "r":30, "fill":0, "color":1, "en":1}
```
- `w`, `h`: 寬度和高度
- `r`: 圓角半徑 (r_rect 專用)
- `fill`: 填充 (1=填充, 0=邊框)

#### 圓形 (circle)
```json
{"type":"circle", "x0":64, "y0":32, "r":20, "fill":0, "color":1, "en":1}
```
- `r`: 半徑

#### 線條 (line)
```json
{"type":"line", "x0":0, "y0":10, "x1":127, "y1":10, "color":1, "en":1}
```
- `x1`, `y1`: 終點座標

#### 點 (pixel)
```json
{"type":"pixel", "x0":64, "y0":32, "color":1, "en":1}
```

#### 三角形 (trle)
```json
{"type":"trle", "x0":64, "y0":10, "x1":50, "y1":30, "x2":78, "y2":30, "fill":0, "color":1, "en":1}
```
- `x1,y1`, `x2,y2`: 另外兩個頂點

## 📊 功能對應表

| func | 功能描述 | 單位 | class 說明 |
|------|---------|------|-----------|
| 0 | 日期 | - | 日期格式字串 |
| 1 | 時間 | - | 時間格式字串 |
| 2 | CPU溫度 | °C | 0=原始值, 1=浮點 |
| 3 | CPU使用率 | % | 1=浮點數 |
| 4 | CPU頻率 | GHz | 1=轉換為GHz |
| 5 | IP地址 | - | 需指定 port |
| 6 | 總內存 | GB | 1=轉換為GB |
| 7 | 已用內存 | GB | 1=轉換為GB |
| 8 | 內存使用率 | % | 1=百分比 |
| 9 | 總存儲 | GB | 1=轉換為GB |
| 10 | 已用存儲 | GB | 1=轉換為GB |
| 11 | 存儲使用率 | % | 1=百分比 |
| 20 | RX eth0 | GB | 1=轉換為GB |
| 21 | TX eth0 | GB | 1=轉換為GB |
| 22 | RX wlan0 | GB | 1=轉換為GB |
| 23 | TX wlan0 | GB | 1=轉換為GB |

## 🎯 配置範例詳解

### 混合模式 (config_mix_modern.json)
- **歡迎頁面**: 顯示系統名稱和圓角邊框
- **系統資訊頁面**: 日期時間、CPU、內存使用率、存儲使用率
- **網路資訊頁面**: 網路介面IP和流量統計
- **優化**: 只顯示使用率百分比，節省空間

### 大字模式 (config_big_modern.json)
- **單一資訊頁面**: 每頁只顯示一種資訊
- **大字體**: 使用 size=2 或 size=3
- **適合遠距離觀看**: 字體清晰易讀

### 簡化模式 (config_simple_modern.json)
- **極簡設計**: 只有歡迎頁和狀態頁
- **緊湊佈局**: 在一頁顯示所有關鍵資訊
- **適合小螢幕**: 最大化資訊密度

## 🔧 自定義配置

### 1. 修改顯示內容
```json
// 修改文字內容
{"type":"str", "data":"您的文字", "x0":10, "y0":20, "size":2, "color":1, "en":1}

// 修改系統資訊位置
{"type":"base", "func":2, "x0":50, "y0":30, "base":4, "class":0, "size":1, "color":1, "en":1}
```

### 2. 調整頁面時間
```json
{
  "seting": {
    "cycle": 10,    // 增加循環次數
    "time": 100,    // 延長顯示時間
    "page": 1
  }
}
```

### 3. 添加新頁面
```json
{
  "new_page": {
    "seting": {
      "cycle": 5,
      "time": 40,
      "page": 5    // 新的頁面編號
    },
    "display": [
      // 您的顯示元素
    ]
  }
}
```

### 4. 停用某個元素
```json
{"type":"str", "data":"Hidden", "x0":10, "y0":20, "size":1, "color":1, "en":0}
```
將 `"en":0` 即可停用該元素

## 📐 座標系統

OLED 螢幕座標系統：
- 解析度: 128x64 像素
- 原點 (0,0) 在左上角
- X軸: 0-127 (左到右)
- Y軸: 0-63 (上到下)

## ⚠️ 注意事項

1. **頁面編號**: 必須連續，從1開始
2. **blank頁面**: 用於清除螢幕，page編號要最大
3. **字元限制**: base 參數限制顯示字元數，避免溢出
4. **網路介面**: func=5 時必須指定正確的 port 名稱
5. **座標範圍**: 確保所有元素在螢幕範圍內

## 🚀 快速開始

1. **選擇配置**: 根據需求選擇合適的配置文件
2. **複製配置**: `cp config_mix_modern.json /etc/oled/config.json`
3. **重啟程式**: `killall ssd_oled && ssd_oled &`
4. **自定義**: 根據需要修改配置文件

## 🔍 故障排除

- **元素不顯示**: 檢查 `"en":1` 和座標是否正確
- **資訊顯示錯誤**: 檢查 func 編號和 class 設定
- **頁面不切換**: 檢查頁面編號是否連續
- **程式崩潰**: 檢查 JSON 語法是否正確